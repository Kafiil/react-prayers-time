(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e){e.exports=["fajr","chorouq","dhuhr","asr","maghrib","ishae"]},24:function(e,t,a){e.exports=a(55)},30:function(e,t,a){},34:function(e,t,a){},4:function(e,t,a){e.exports={spinner:"spinner_spinner__3ahFg",container:"spinner_container__36_1M",row:"spinner_row__2zXui"}},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),i=a.n(c),o=(a(30),a(5)),s=a.n(o),l=a(18),u=a(19),m=a(20),f=a(22),d=a(21),p=a(23),h=(a(33),a(34),a(6)),v=a.n(h),g=a(2),E=a.n(g),y=a(3),b=(a(53),a(54),a(16)),S=function(e){var t={};return b.forEach(function(a){t[a]=E()(function(e,t){var a=e.split(":"),n=Object(y.a)(a,2),r=n[0],c=n[1],i=new Date(t);return i.setHours(r),i.setMinutes(c),i}(e[a],e.day))}),t},O=a(16),j=function(e){var t=e.prayer,a=e.local,c=Object(n.useState)(),i=Object(y.a)(c,2),o=i[0],s=i[1],l=Object(n.useState)(),u=Object(y.a)(l,2),m=u[0],f=u[1],d=S(t),p=function(){var e=Object.keys(d).filter(function(e){return E()().isBefore(d[e])});m=0===e.length?"fajr":e[0],f(m);var t=E()(d[m].diff(E()())).format("HH:mm");s(t)};Object(n.useEffect)(function(){p();var e=setInterval(p,6e4);return function(){clearInterval(e)}},[t]);var h=E()(t.date).locale(a).format("dddd LL");return"fr"===a&&(h=h.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")),r.a.createElement("div",{className:"card"},r.a.createElement("h1",null,t.city),r.a.createElement("h2",null,h),r.a.createElement("ul",null,O.map(function(e){return r.a.createElement("li",{key:e,className:e===m?"next-prayer":""},r.a.createElement("span",{className:"name"},e),r.a.createElement("span",{className:"time"},t[e]),e===m&&r.a.createElement("span",{className:"difference"},o))})),r.a.createElement("dl",null))},N=a(4),w=a.n(N);var I=function(){return r.a.createElement("div",{className:w.a.container},r.a.createElement("div",{className:w.a.row},r.a.createElement("div",{className:w.a.spinner})),r.a.createElement("div",{className:w.a.row},r.a.createElement("h1",null," Loading ")))},_=function(e){var t=e.values,a=e.onChange,n=e.value;return r.a.createElement("div",{className:"select"},r.a.createElement("select",{value:n,onChange:a},t.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})))},k="https://maroc-salat.herokuapp.com/",x=function(e,t){return e.name>t.name?1:t.name>e.name?-1:0},C=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(f.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){var t=+e.target.value;localStorage.setItem("id",t);var n=a.state.prayers.filter(function(e){return e.id===t})[0];a.setState({current:n,id:t})},a.state={local:"fr"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark(function e(){var t,a,n,r,c,i,o,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("cities")){e.next=6;break}return e.next=3,v.a.get("".concat(k,"city"));case 3:e.t0=x,t=e.sent.data.sort(e.t0),localStorage.setItem("cities",JSON.stringify(t));case 6:if(a=JSON.parse(localStorage.getItem("cities")),localStorage.getItem("id")||localStorage.setItem("id",a[0].id),n=+localStorage.getItem("id"),r=E()().date(),c=E()().month()+1,i="prayers_".concat(r,"_").concat(c),localStorage.getItem(i)){e.next=17;break}return e.next=15,v.a.get("".concat(k,"prayer?month=").concat(c,"&day=").concat(r));case 15:o=e.sent.data,localStorage.setItem(i,JSON.stringify(o));case 17:l=JSON.parse(localStorage.getItem(i)),this.setState({cities:a,id:n,prayers:l,current:l.filter(function(e){return e.id===n})[0]});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{id:"main"},this.state.prayers?r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{local:this.state.local,prayer:this.state.current}),r.a.createElement(_,{value:this.state.id,values:this.state.cities,onChange:this.onChange})):r.a.createElement(I,null))}}]),t}(n.Component);i.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.c40bd6d3.chunk.js.map