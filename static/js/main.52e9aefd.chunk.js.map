{"version":3,"sources":["context/AppContext.ts","common/Spinner.tsx","components/Clock.tsx","utils/dates.ts","components/PrayerCard.tsx","components/SelectList.tsx","components/ChangeLanguage.tsx","utils/localStorage.ts","context/types.ts","context/AppReducer.ts","App.tsx","index.tsx"],"names":["initialState","prayers","cities","id","parseInt","localStorage","getItem","lang","languages","time","moment","AppContext","React","createContext","spin","keyframes","Spinner","styled","div","Wrapper","Container","text","useContext","StyledWrapper","StyledH","css","StyledH1","h1","StyledH2","h2","StyledH3","h3","format","city","find","e","name","locale","NAMES","require","timesFromStringtoDate","prayer","result","Object","keys","forEach","timeString","day","split","hour","minute","newDay","date","second","parseDateTime","PrayerCard","StyledUl","ul","StyledName","StyledDifference","StyledNext","StyledLi","li","props","className","useState","diff","setDifference","next","setNextOne","useEffect","times","nextOnes","filter","t","isBefore","length","map","key","memo","onChange","options","value","label","customStyles","singleValue","provided","padding","width","textAlign","menu","styles","menuPlacement","changeLanguage","checked","onColor","checkedIcon","uncheckedIcon","getFromLocalStorageOrApi","url","a","axios","get","data","setItem","JSON","stringify","parse","cleanLocalStorage","args","includes","removeItem","LOAD_CITIES","LOAD_PRAYERS","reducer","state","action","type","payload","API_URL","App","useReducer","AppReducer","dispatch","PRAYERS_KEY","month","URL","initalCities","initialPrayers","init","interval","setInterval","clearInterval","changeCity","useCallback","Provider","ChangeLanguage","Clock","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.52e9aefd.chunk.js","sourcesContent":["import React from \"react\";\nimport moment from \"moment\";\nimport \"moment/locale/fr\";\nimport \"moment/locale/ar-ma\";\nimport { IState } from \"./types\";\n\nexport const initialState: IState = {\n  prayers: null,\n  cities: null,\n  id: parseInt(localStorage.getItem(\"id\") || \"1\"),\n  lang: localStorage.getItem(\"lang\") || \"ar\",\n  languages: [\"ar\", \"fr\"],\n  time: moment()\n};\n\nexport const AppContext = React.createContext(initialState);\n","import React, { useContext } from 'react';\nimport styled, { keyframes } from 'styled-components';\n\nimport { AppContext } from '../context/AppContext';\n\nconst spin = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`;\n\nconst Spinner = styled.div`\n  width: 64px;\n  height: 64px;\n  margin-bottom: 1rem;\n  flex: 1;\n  &:after {\n    content: ' ';\n    display: block;\n    width: 46px;\n    height: 46px;\n    margin: 1px;\n    border-radius: 50%;\n    border: 5px solid #fff;\n    border-color: #fff transparent #fff transparent;\n    animation: ${spin} 1.2s linear infinite;\n  }\n`;\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Container = styled(Wrapper)`\n  height: 100vh;\n`;\n\nexport default () => {\n  const { lang } = useContext(AppContext);\n  const text = lang === 'fr' ? 'Chargement en cours ...' : '... جار التحميل';\n  return (\n    <Container>\n      <Wrapper>\n        <Spinner />\n        <h1>{text}</h1>\n      </Wrapper>\n    </Container>\n  );\n};\n","import React, { useContext } from 'react';\nimport moment from 'moment';\nimport { AppContext } from '../context/AppContext';\nimport styled, { css } from 'styled-components';\n\nconst StyledWrapper = styled.div`\n  margin-top: 2vh;\n`;\n\nconst StyledH = css`\n  text-align: center;\n  padding: 1rem;\n`;\n\nconst StyledH1 = styled.h1`\n  ${StyledH}\n`;\nconst StyledH2 = styled.h2`\n  ${StyledH}\n  text-transform: capitalize;\n`;\nconst StyledH3 = styled.h3`\n  ${StyledH}\n`;\n\ntype ClockProps = { format?: string };\n\nexport default ({ format }: ClockProps) => {\n  const { cities, time, id, lang } = useContext(AppContext);\n  const city = cities ? cities.find((e: any) => e.id === id)!.name : null;\n  const defaultFormat = 'HH:mm:ss';\n\n  return (\n    <StyledWrapper>\n      <StyledH1>{city}</StyledH1>\n      <StyledH2>{time.locale(lang).format('dddd LL')}</StyledH2>\n      <StyledH3>\n        <span>{moment(time).format(format ? format : defaultFormat)}</span>\n      </StyledH3>\n    </StyledWrapper>\n  );\n};\n","import moment from 'moment';\nconst NAMES = require('../data/prayers');\n\nexport const parseDateTime = (timeString: string, day: number) => {\n  const [hour, minute] = timeString.split(':');\n  const newDay = moment();\n  newDay.date(day);\n  newDay.hour(parseInt(hour));\n  newDay.minute(parseInt(minute));\n  newDay.second(0);\n  return newDay;\n};\n\nexport const timesFromStringtoDate = (prayer: any) => {\n  let result: any = {};\n  Object.keys(NAMES).forEach(name => {\n    result[name] = moment(parseDateTime(prayer[name], prayer.day));\n  });\n  return result;\n};\n","import React, { useState, useEffect, useContext } from 'react';\nimport moment from 'moment';\nimport styled, { css } from 'styled-components';\nimport { AppContext } from '../context/AppContext';\nimport { timesFromStringtoDate } from '../utils/dates';\n\nconst NAMES = require('../data/prayers');\nconst DEFAULT_TIME_FORMAT = 'HH:mm:ss';\n\nconst PrayerCard = () => {\n  const { prayers, id, time, lang } = useContext(AppContext);\n\n  const StyledUl = styled.ul`\n    height: 50vh;\n    margin: 1vh 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    @media (min-width: 1200px) {\n      height: 50vh;\n    }\n  `;\n\n  const StyledName = styled.div`\n    text-transform: capitalize;\n  `;\n  const StyledDifference = styled.div`\n    color: red !important;\n  `;\n\n  const StyledNext = css`\n    font-weight: 700;\n    background-color: white;\n    color: black;\n    padding: 0.5rem 0.4rem 0.5rem;\n    border-radius: 2px;\n  `;\n\n  const StyledLi = styled.li`\n    margin: 1.2rem 0;\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    flex-direction: ${() => (lang === 'fr' ? 'row' : 'row-reverse')};\n    ${props => (props.className === 'next' ? StyledNext : '')}\n  `;\n\n  const prayer = (prayers || []).find((e: any) => e.id === id);\n\n  let [diff, setDifference] = useState();\n  let [next, setNextOne] = useState();\n\n  useEffect(() => {\n    const times = timesFromStringtoDate(prayer);\n    const nextOnes = Object.keys(times).filter(t => time.isBefore(times[t]));\n    const next = nextOnes.length === 0 ? Object.keys(NAMES)[0] : nextOnes[0];\n    setNextOne(next);\n    const diff = moment(times[next].diff(time)).format(DEFAULT_TIME_FORMAT);\n    setDifference(diff);\n  }, [time, prayer]);\n\n  return (\n    <StyledUl>\n      {Object.keys(NAMES).map(name => {\n        return (\n          <StyledLi key={name} className={name === next ? 'next' : ''}>\n            <StyledName>{NAMES[name][lang]}</StyledName>\n            {name === next && <StyledDifference>{diff}</StyledDifference>}\n            <div>{(prayer as any)[name]}</div>\n          </StyledLi>\n        );\n      })}\n    </StyledUl>\n  );\n};\n\nexport default PrayerCard;\n","import React, { useContext } from 'react';\nimport Select from 'react-select';\nimport { AppContext } from '../context/AppContext';\n// import styled from 'styled-components';\n\ntype SelectListProps = { onChange: any };\nconst SelectList = ({ onChange }: SelectListProps) => {\n  const { cities, id, lang } = useContext(AppContext);\n  const options = cities\n    ? cities.map((e: any) => ({\n        value: e.id,\n        label: e.name\n      }))\n    : [];\n\n  const customStyles = {\n    singleValue: (provided: any) => {\n      const padding = '20px 10px';\n      const textAlign = lang === 'ar' ? 'right' : 'left';\n      return { ...provided, padding, width: '100%', textAlign };\n    },\n    menu: (provided: any) => {\n      const textAlign = lang === 'ar' ? 'right' : 'left';\n      return { ...provided, textAlign };\n    }\n  };\n\n  // const StyledWrapper = styled.div`\n  //   width: 100%;\n  //   color: black;\n  //   margin-bottom: 2vh;\n  // `;\n\n  // .select select {\n  //   width: 100%;\n  //   padding: 0.8rem;\n  //   border-radius: 2px;\n  // }\n\n  return (\n    <div className=\"select\">\n      <Select\n        styles={customStyles}\n        options={options}\n        menuPlacement={'top'}\n        value={options.find((e: any) => e.value === id)}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport default React.memo(SelectList);\n","import React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { AppContext } from '../context/AppContext';\nimport Switch from 'react-switch';\n\nexport default ({ changeLanguage }: any) => {\n  const { lang } = useContext(AppContext);\n\n  const StyledWrapper = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: space-evenly;\n  `;\n\n  return (\n    <StyledWrapper>\n      <div>Français</div>\n      <Switch\n        onChange={() => changeLanguage()}\n        checked={lang === 'ar'}\n        onColor=\"#888\"\n        checkedIcon={false}\n        uncheckedIcon={false}\n      />\n      <div>العربية</div>\n    </StyledWrapper>\n  );\n};\n","import axios from \"axios\";\n\n//TODO: Add JSDoc\nexport const getFromLocalStorageOrApi = async (name: string, url: string) => {\n  if (!localStorage.getItem(name)) {\n    const value = (await axios.get(url)).data;\n    localStorage.setItem(name, JSON.stringify(value));\n    return value;\n  }\n\n  return JSON.parse(localStorage.getItem(name) || \"\");\n};\n\n/**\n *Delete all items in the localStorage that are not specified as arguments\n *\n * @param {*} args  keys that should not be deleted from localStorage\n */\n\nexport const cleanLocalStorage = (...args: any) => {\n  Object.keys({ ...localStorage })\n    .filter(e => !args.includes(e))\n    .forEach(e => localStorage.removeItem(e));\n};\n","export const CHANGE_CITY: string = 'CHANGE_CITY';\nexport const LOAD_CITIES: string = 'LOAD_CITIES';\nexport const LOAD_PRAYERS: string = 'LOAD_PRAYERS';\nexport const REFRESH_TIME: string = 'REFRESH_TIME';\nexport const CHANGE_LANGUAGE: string = 'CHANGE_LANGUAGE';\n\nexport interface IPrayer {\n  asr: string;\n  chorouq: string;\n  city: string;\n  dhuhr: string;\n  fajr: string;\n  ishae: string;\n  maghrib: string;\n  id: number;\n  day: Date;\n}\nexport interface ICity {\n  name: string;\n  id: number;\n}\nexport interface IState {\n  prayers: IPrayer[] | null;\n  cities: ICity[] | null;\n  id: number;\n  lang: string;\n  languages: string[];\n  time: any;\n}\n\nexport interface IAction {\n  type: string;\n  payload: any;\n}\n","import {\n  CHANGE_CITY,\n  LOAD_CITIES,\n  LOAD_PRAYERS,\n  REFRESH_TIME,\n  CHANGE_LANGUAGE,\n  IState,\n  IAction\n} from './types';\n\nconst reducer = (state: IState, action: IAction) => {\n  switch (action.type) {\n    case CHANGE_CITY:\n      localStorage.setItem('id', action.payload);\n      return {\n        ...state,\n        id: action.payload\n      };\n    case CHANGE_LANGUAGE:\n      const lang = state.lang === 'fr' ? 'ar' : 'fr';\n      localStorage.setItem('lang', lang);\n      return {\n        ...state,\n        lang\n      };\n    case REFRESH_TIME:\n      return {\n        ...state,\n        time: action.payload\n      };\n    case LOAD_CITIES:\n      return {\n        ...state,\n        cities: action.payload\n      };\n    case LOAD_PRAYERS:\n      return {\n        ...state,\n        prayers: action.payload\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import React, { useEffect, useReducer, useCallback } from 'react';\nimport moment from 'moment';\n// import styled from 'styled-components';\nimport './App.css';\n\nimport Spinner from './common/Spinner';\nimport Clock from './components/Clock';\nimport PrayerCard from './components/PrayerCard';\nimport SelectList from './components/SelectList';\nimport ChangeLanguage from './components/ChangeLanguage';\n\nimport {\n  cleanLocalStorage,\n  getFromLocalStorageOrApi\n} from './utils/localStorage';\n\nimport AppReducer from './context/AppReducer';\nimport { AppContext, initialState } from './context/AppContext';\nimport {\n  LOAD_CITIES,\n  LOAD_PRAYERS,\n  CHANGE_CITY,\n  CHANGE_LANGUAGE,\n  REFRESH_TIME\n} from './context/types';\n\nconst API_URL = 'https://maroc-salat.herokuapp.com/';\n\nconst App = () => {\n  const [state, dispatch] = useReducer(AppReducer, initialState);\n\n  useEffect(() => {\n    async function init() {\n      const PRAYERS_KEY = `prayers_${moment().date()}_${moment().month() + 1}`;\n      const URL = `${API_URL}prayer?month=${moment().month() +\n        1}&day=${moment().date()}`;\n      const initalCities = await getFromLocalStorageOrApi(\n        `cities_${state.lang}`,\n        `${API_URL}city?lang=${state.lang}`\n      );\n      dispatch({ type: LOAD_CITIES, payload: initalCities });\n      const initialPrayers = await getFromLocalStorageOrApi(PRAYERS_KEY, URL);\n      dispatch({ type: LOAD_PRAYERS, payload: initialPrayers });\n      cleanLocalStorage('id', 'cities_ar', 'cities_fr', 'lang', PRAYERS_KEY);\n    }\n    init();\n  }, [state.lang]);\n\n  useEffect(() => {\n    const interval = setInterval(\n      () => dispatch({ type: REFRESH_TIME, payload: moment() }),\n      1000\n    );\n    return () => {\n      clearInterval(interval);\n    };\n  });\n\n  const changeCity = useCallback(\n    (e: any) => dispatch({ payload: e.value, type: CHANGE_CITY }),\n    []\n  );\n\n  const changeLanguage = () =>\n    dispatch({ payload: null, type: CHANGE_LANGUAGE });\n\n  return (\n    <AppContext.Provider value={state}>\n      <div id=\"main\">\n        <ChangeLanguage changeLanguage={changeLanguage} />\n        {state.id && state.prayers ? (\n          <>\n            <Clock />\n            <PrayerCard />\n            <SelectList onChange={changeCity} />\n          </>\n        ) : (\n          <Spinner />\n        )}\n      </div>\n    </AppContext.Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'reset-css';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}