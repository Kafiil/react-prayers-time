{"version":3,"sources":["common/spinner.js","utils/strings.js","components/clock.js","utils/dates.js","components/prayerCard.js","components/selectList.js","utils/localStorage.js","App.js","utils/customHooks.js","index.js","common/spinner.module.css"],"names":["spinner","react_default","a","createElement","className","styles","container","wrapper","toTitleCase","str","match","map","x","charAt","toUpperCase","slice","join","clock","_ref","format","city","_useState","useState","moment","_useState2","Object","slicedToArray","time","setTime","useEffect","interval","setInterval","clearInterval","NAMES","require","timesFromStringtoDate","prayer","result","forEach","name","timeString","day","_timeString$split","split","_timeString$split2","hour","minute","newDay","date","parseDateTime","PrayerCard","difference","setDifference","_useState3","_useState4","nextOne","setNextOne","times","updateDifference","nextOnes","keys","filter","t","isBefore","length","diff","key","SelectList","values","onChange","value","options","e","id","label","customStyles","singleValue","provided","objectSpread","padding","react_select_browser_esm","menuPlacement","defaultValue","find","getFromLocalStorageOrApi","asyncToGenerator","regenerator_default","mark","_callee","url","wrap","_context","prev","next","localStorage","getItem","axios","get","sent","data","setItem","JSON","stringify","abrupt","parse","stop","_x","_x2","apply","this","arguments","cleanLocalStorage","_len","args","Array","_key","includes","removeItem","API_URL","App","_useLocalStorage","initialValue","undefined","setValue","useLocalStorage","_useLocalStorage2","setId","cities","setCities","prayers","setPrayers","PRAYERS_KEY","concat","month","URL","_init","initalCities","initialPrayers","init","Fragment","prayerCard","selectList","common_spinner","ReactDOM","render","src_App_0","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.1e91e2b1.chunk.js","sourcesContent":["import React from 'react';\r\nimport styles from './spinner.module.css';\r\n\r\nfunction spinner() {\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.wrapper}>\r\n        <div className={styles.spinner} />\r\n        <h1>Loading ...</h1>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default spinner;\r\n","export const toTitleCase = str =>\r\n  str\r\n    .match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)\r\n    .map(x => x.charAt(0).toUpperCase() + x.slice(1))\r\n    .join(' ');","import React, { useEffect, useState } from 'react';\r\nimport moment from 'moment';\r\nimport { toTitleCase } from '../utils/strings';\r\n\r\nexport default function clock({ format, city }) {\r\n  const [time, setTime] = useState(moment());\r\n  const defaultFormat = 'HH:mm:ss';\r\n  useEffect(() => {\r\n    const interval = setInterval(() => setTime(moment()), 1000);\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"clock\">\r\n      <h1>{city}</h1>\r\n      <h2>{toTitleCase(time.format('dddd LL'))}</h2>\r\n      <h2>\r\n        <span>{moment(time).format(format ? format : defaultFormat)}</span>\r\n      </h2>\r\n    </div>\r\n  );\r\n}\r\n","import moment from 'moment';\r\nconst NAMES = require('../data/prayers');\r\n\r\n\r\nexport const parseDateTime = (timeString, day) => {\r\n  const [hour, minute] = timeString.split(':');\r\n  const newDay = new moment();\r\n  newDay.date(day);\r\n  newDay.hour(hour);\r\n  newDay.minute(minute)\r\n  return newDay;\r\n};\r\n\r\nexport const timesFromStringtoDate = prayer => {\r\n  let result = {};\r\n  NAMES.forEach(name => {\r\n    result[name] = moment(parseDateTime(prayer[name], prayer.day));\r\n  });\r\n  return result;\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport moment from 'moment';\r\nimport 'moment/locale/fr';\r\nimport { timesFromStringtoDate } from '../utils/dates';\r\nconst NAMES = require('../data/prayers');\r\n\r\nconst PrayerCard = ({ prayer }) => {\r\n  let [difference, setDifference] = useState();\r\n  let [nextOne, setNextOne] = useState();\r\n  const times = timesFromStringtoDate(prayer);\r\n\r\n  const updateDifference = () => {\r\n    const nextOnes = Object.keys(times).filter(t =>\r\n      moment().isBefore(times[t])\r\n    );\r\n    nextOne = nextOnes.length === 0 ? NAMES[0] : nextOnes[0];\r\n    setNextOne(nextOne);\r\n    const diff = moment(times[nextOne].diff(moment())).format('HH:mm:ss');\r\n    setDifference(diff);\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateDifference();\r\n    const interval = setInterval(updateDifference, 1000);\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [prayer]);\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <ul>\r\n        {NAMES.map(name => {\r\n          return (\r\n            <li key={name} className={name === nextOne ? 'next-prayer' : ''}>\r\n              <div className=\"name\">{name}</div>\r\n              {name === nextOne && (\r\n                <div className=\"difference\">{difference}</div>\r\n              )}\r\n              <div className=\"time\">{prayer[name]}</div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n      <dl />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrayerCard;\r\n","import React from 'react';\r\nimport Select from 'react-select';\r\n\r\nconst SelectList = ({ values, onChange, value }) => {\r\n  const options = values.map(e => ({\r\n    value: e.id,\r\n    label: e.name\r\n  }));\r\n\r\n  const customStyles = {\r\n    singleValue: (provided) => {\r\n      const padding = '20px 0';\r\n      return { ...provided, padding};\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"select\">\r\n      <Select\r\n        styles={customStyles}\r\n        options={options}\r\n        menuPlacement={'top'}\r\n        defaultValue={options.find(e => e.value === value)}\r\n        onChange={onChange}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectList;\r\n","import axios from 'axios';\r\n\r\n//TODO: Add JSDoc\r\nexport const getFromLocalStorageOrApi = async (name, url) => {\r\n  if (!localStorage.getItem(name)) {\r\n    const value = (await axios.get(url)).data;\r\n    localStorage.setItem(name, JSON.stringify(value));\r\n    return value;\r\n  }\r\n\r\n  return JSON.parse(localStorage.getItem(name));\r\n};\r\n\r\n/**\r\n *Delete all items in the localStorage that are not specified as arguments\r\n *\r\n * @param {*} args  keys that should not be deleted from localStorage\r\n */\r\n\r\nexport const cleanLocalStorage = (...args) => {\r\n  Object.keys({ ...localStorage })\r\n    .filter(e => !args.includes(e))\r\n    .forEach(e => localStorage.removeItem(e));\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport 'reset-css';\r\nimport './App.css';\r\nimport moment from 'moment';\r\n\r\nimport Spinner from './common/spinner';\r\nimport Clock from './components/clock';\r\nimport PrayerCard from './components/prayerCard';\r\nimport SelectList from './components/selectList';\r\n\r\nimport { useLocalStorage } from './utils/customHooks';\r\nimport {\r\n  cleanLocalStorage,\r\n  getFromLocalStorageOrApi\r\n} from './utils/localStorage';\r\n\r\nconst API_URL = 'https://maroc-salat.herokuapp.com/';\r\n\r\nconst App = () => {\r\n  const [id, setId] = useLocalStorage('id', 1);\r\n  const [cities, setCities] = useState();\r\n  const [prayers, setPrayers] = useState();\r\n  const PRAYERS_KEY = `prayers_${moment().date()}_${moment().month() + 1}`;\r\n  const URL = `${API_URL}prayer?month=${moment().month() +\r\n    1}&day=${moment().date()}`;\r\n\r\n  useEffect(() => {\r\n    async function init() {\r\n      const initalCities = await getFromLocalStorageOrApi(\r\n        'cities',\r\n        `${API_URL}city`\r\n      );\r\n      setCities(initalCities);\r\n      const initialPrayers = await getFromLocalStorageOrApi(PRAYERS_KEY, URL);\r\n      setPrayers(initialPrayers);\r\n      cleanLocalStorage('id', 'cities', PRAYERS_KEY);\r\n    }\r\n    init();\r\n  }, []);\r\n\r\n  return (\r\n    <div id=\"main\">\r\n      {id && prayers ? (\r\n        <>\r\n          <Clock city={cities.find(e => e.id === id).name} />\r\n          <PrayerCard prayer={prayers.find(e => e.id === id)} />\r\n          <SelectList\r\n            value={id}\r\n            values={cities}\r\n            onChange={e => setId(e.value)}\r\n          />\r\n        </>\r\n      ) : (\r\n        <Spinner />\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { useState, useEffect } from 'react';\r\n\r\nexport const useLocalStorage = (name, initialValue = null) => {\r\n  const [value, setValue] = useState(\r\n    +localStorage.getItem(name) || initialValue\r\n  );\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(name, value);\r\n  }, [value]);\r\n\r\n  return [value, setValue];\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__3ahFg\",\"container\":\"spinner_container__36_1M\",\"wrapper\":\"spinner_wrapper__1eBZ7\"};"],"sourceRoot":""}