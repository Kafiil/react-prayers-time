{"version":3,"sources":["common/spinner.js","utils/dates.js","components/clock.js","components/prayerCard.js","utils/strings.js","components/selectList.js","utils/localStorage.js","App.js","utils/customHooks.js","index.js","common/spinner.module.css"],"names":["spinner","react_default","a","createElement","className","styles","container","row","NAMES","require","timesFromStringtoDate","prayer","result","forEach","name","moment","timeString","day","_timeString$split","split","_timeString$split2","Object","slicedToArray","hour","minute","newDay","date","parseDateTime","clock","_ref","format","_useState","useState","_useState2","time","setTime","useEffect","interval","setInterval","clearInterval","PrayerCard","difference","setDifference","_useState3","_useState4","nextOne","setNextOne","times","updateDifference","nextOnes","keys","filter","t","isBefore","length","diff","match","map","x","charAt","toUpperCase","slice","join","city","key","SelectList","values","onChange","value","options","e","id","label","react_select_browser_esm","menuPlacement","defaultValue","find","getFromLocalStorageOrApi","asyncToGenerator","regenerator_default","mark","_callee","url","wrap","_context","prev","next","localStorage","getItem","axios","get","sent","data","setItem","JSON","stringify","abrupt","parse","stop","_x","_x2","apply","this","arguments","cleanLocalStorage","_len","args","Array","_key","objectSpread","includes","removeItem","API_URL","App","_useLocalStorage","initialValue","undefined","setValue","useLocalStorage","_useLocalStorage2","setId","cities","setCities","prayers","setPrayers","PRAYERS_KEY","concat","month","URL","_init","initalCities","initialPrayers","init","Fragment","prayerCard","selectList","common_spinner","ReactDOM","render","src_App_0","document","getElementById","module","exports"],"mappings":"mXAgBeA,MAbf,WACE,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOC,WACrBL,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOE,KACrBN,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOL,WAEzBC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAOE,KACrBN,EAAAC,EAAAC,cAAA,0BCTFK,SAAQC,EAAQ,KAYTC,EAAwB,SAAAC,GACnC,IAAIC,EAAS,GAIb,OAHAJ,EAAMK,QAAQ,SAAAC,GACZF,EAAOE,GAAQC,IAZU,SAACC,EAAYC,GAAQ,IAAAC,EACzBF,EAAWG,MAAM,KADQC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACzCK,EADyCH,EAAA,GACnCI,EADmCJ,EAAA,GAE1CK,EAAS,IAAIV,IAInB,OAHAU,EAAOC,KAAKT,GACZQ,EAAOF,KAAKA,GACZE,EAAOD,OAAOA,GACPC,EAMiBE,CAAchB,EAAOG,GAAOH,EAAOM,QAEpDL,GCfM,SAASgB,EAATC,GAA2B,IAAVC,EAAUD,EAAVC,OAAUC,EAChBC,mBAASjB,OADOkB,EAAAZ,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GACjCG,EADiCD,EAAA,GAC3BE,EAD2BF,EAAA,GASxC,OANAG,oBAAU,WACR,IAAMC,EAAWC,YAAY,kBAAMH,EAAQpB,QAAW,KACtD,OAAO,WACLwB,cAAcF,KAEf,IACIpC,EAAAC,EAAAC,cAAA,YAAOY,IAAOmB,GAAMJ,OAAOA,GAPZ,aCCxB,IAAMtB,EAAQC,EAAQ,IAoDP+B,EAlDI,SAAAX,GAAgB,IAAblB,EAAakB,EAAblB,OAAaoB,EACCC,qBADDC,EAAAZ,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GAC5BU,EAD4BR,EAAA,GAChBS,EADgBT,EAAA,GAAAU,EAELX,qBAFKY,EAAAvB,OAAAC,EAAA,EAAAD,CAAAsB,EAAA,GAE5BE,EAF4BD,EAAA,GAEnBE,EAFmBF,EAAA,GAG3BG,EAAQrC,EAAsBC,GAE9BqC,EAAmB,WACvB,IAAMC,EAAW5B,OAAO6B,KAAKH,GAAOI,OAAO,SAAAC,GAAC,OAC1CrC,MAASsC,SAASN,EAAMK,MAE1BP,EAA8B,IAApBI,EAASK,OAAe9C,EAAM,GAAKyC,EAAS,GACtDH,EAAWD,GACX,IAAMU,EAAOxC,IAAOgC,EAAMF,GAASU,KAAKxC,QAAWe,OAAO,YAC1DY,EAAca,IAGhBnB,oBAAU,WACRY,IACA,IAAMX,EAAWC,YAAYU,EAAkB,KAC/C,OAAO,WACLT,cAAcF,KAEf,CAAC1B,IAEJ,IAAIe,EAAmBX,IAAOJ,EAAOe,MAAMI,OAAO,WC7B/C0B,MAAM,sEACNC,IAAI,SAAAC,GAAC,OAAIA,EAAEC,OAAO,GAAGC,cAAgBF,EAAEG,MAAM,KAC7CC,KAAK,KD6BR,OACE7D,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,UAAKQ,EAAOoD,MACZ9D,EAAAC,EAAAC,cAAA,UAAKuB,GACLzB,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAACyB,EAAD,OAEF3B,EAAAC,EAAAC,cAAA,UACGK,EAAMiD,IAAI,SAAA3C,GACT,OACEb,EAAAC,EAAAC,cAAA,MAAI6D,IAAKlD,EAAMV,UAAWU,IAAS+B,EAAU,cAAgB,IAC3D5C,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAAQU,GACxBb,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAAQO,EAAOG,IAC9BA,IAAS+B,GACR5C,EAAAC,EAAAC,cAAA,QAAMC,UAAU,cAAcqC,OAMxCxC,EAAAC,EAAAC,cAAA,qBE/BS8D,EAnBI,SAAApC,GAAiC,IAA9BqC,EAA8BrC,EAA9BqC,OAAQC,EAAsBtC,EAAtBsC,SAAUC,EAAYvC,EAAZuC,MAChCC,EAAUH,EAAOT,IAAI,SAAAa,GAAC,MAAK,CAC/BF,MAAOE,EAAEC,GACTC,MAAOF,EAAExD,QAIX,OACEb,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACEJ,QAASA,EACTK,cAAe,MACfC,aAAcN,EAAQO,KAAK,SAAAN,GAAC,OAAIA,EAAEF,QAAUA,IAC5CD,SAAUA,+BCbLU,EAAwB,eAAAhD,EAAAR,OAAAyD,EAAA,EAAAzD,CAAA0D,EAAA7E,EAAA8E,KAAG,SAAAC,EAAOnE,EAAMoE,GAAb,IAAAd,EAAA,OAAAW,EAAA7E,EAAAiF,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACjCC,aAAaC,QAAQ1E,GADY,CAAAsE,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAEfG,IAAMC,IAAIR,GAFK,cAE9Bd,EAF8BgB,EAAAO,KAECC,KACrCL,aAAaM,QAAQ/E,EAAMgF,KAAKC,UAAU3B,IAHNgB,EAAAY,OAAA,SAI7B5B,GAJ6B,cAAAgB,EAAAY,OAAA,SAO/BF,KAAKG,MAAMV,aAAaC,QAAQ1E,KAPD,wBAAAsE,EAAAc,SAAAjB,MAAH,gBAAAkB,EAAAC,GAAA,OAAAvE,EAAAwE,MAAAC,KAAAC,YAAA,GAgBxBC,EAAoB,WAAa,QAAAC,EAAAF,UAAAjD,OAAToD,EAAS,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAATF,EAASE,GAAAL,UAAAK,GAC5CvF,OAAO6B,KAAP7B,OAAAwF,EAAA,EAAAxF,CAAA,GAAiBkE,eACdpC,OAAO,SAAAmB,GAAC,OAAKoC,EAAKI,SAASxC,KAC3BzD,QAAQ,SAAAyD,GAAC,OAAIiB,aAAawB,WAAWzC,MCRpC0C,EAAU,qCA2CDC,EAzCH,WAAM,IAAAC,ECda,SAACpG,GAA8B,IAAxBqG,EAAwBZ,UAAAjD,OAAA,QAAA8D,IAAAb,UAAA,GAAAA,UAAA,GAAT,KAASxE,EAClCC,oBACvBuD,aAAaC,QAAQ1E,IAASqG,GAF2BlF,EAAAZ,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GACrDqC,EADqDnC,EAAA,GAC9CoF,EAD8CpF,EAAA,GAS5D,OAJAG,oBAAU,WACRmD,aAAaM,QAAQ/E,EAAMsD,IAC1B,CAACA,IAEG,CAACA,EAAOiD,GDMKC,CAAgB,KAAM,GAD1BC,EAAAlG,OAAAC,EAAA,EAAAD,CAAA6F,EAAA,GACT3C,EADSgD,EAAA,GACLC,EADKD,EAAA,GAAAxF,EAEYC,qBAFZC,EAAAZ,OAAAC,EAAA,EAAAD,CAAAU,EAAA,GAET0F,EAFSxF,EAAA,GAEDyF,EAFCzF,EAAA,GAAAU,EAGcX,qBAHdY,EAAAvB,OAAAC,EAAA,EAAAD,CAAAsB,EAAA,GAGTgF,EAHS/E,EAAA,GAGAgF,EAHAhF,EAAA,GAIViF,EAAW,WAAAC,OAAc/G,MAASW,OAAvB,KAAAoG,OAAiC/G,MAASgH,QAAU,GAC/DC,EAAG,GAAAF,OAAMd,EAAN,iBAAAc,OAA6B/G,MAASgH,QAC7C,EADO,SAAAD,OACE/G,MAASW,QAiBpB,OAfAU,oBAAU,WAAM,SAAA6F,IAAA,OAAAA,EAAA5G,OAAAyD,EAAA,EAAAzD,CAAA0D,EAAA7E,EAAA8E,KACd,SAAAC,IAAA,IAAAiD,EAAAC,EAAA,OAAApD,EAAA7E,EAAAiF,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAC6BT,EACzB,SADiD,GAAAiD,OAE9Cd,EAF8C,SADrD,cACQkB,EADR9C,EAAAO,KAKE+B,EAAUQ,GALZ9C,EAAAE,KAAA,EAM+BT,EAAyBgD,EAAaG,GANrE,OAMQG,EANR/C,EAAAO,KAOEiC,EAAWO,GAEX3B,EAAkB,KAAM,SAAUqB,GATpC,wBAAAzC,EAAAc,SAAAjB,OADcoB,MAAAC,KAAAC,YAAA,WAAA0B,EAAA5B,MAAAC,KAAAC,WAYd6B,IACC,IAGDnI,EAAAC,EAAAC,cAAA,OAAKoE,GAAG,QACLA,GAAMoD,EACL1H,EAAAC,EAAAC,cAAAF,EAAAC,EAAAmI,SAAA,KACEpI,EAAAC,EAAAC,cAACmI,EAAD,CAAY3H,OAAQgH,EAAQ/C,KAAK,SAAAN,GAAC,OAAIA,EAAEC,KAAOA,MAC/CtE,EAAAC,EAAAC,cAACoI,EAAD,CACEnE,MAAOG,EACPL,OAAQuD,EACRtD,SAAU,SAAAG,GAAC,OAAIkD,EAAMlD,EAAEF,WAI3BnE,EAAAC,EAAAC,cAACqI,EAAD,QE9CRC,IAASC,OAAOzI,EAAAC,EAAAC,cAACwI,EAAD,MAASC,SAASC,eAAe,4BCJjDC,EAAAC,QAAA,CAAkB/I,QAAA,yBAAAM,UAAA,2BAAAC,IAAA","file":"static/js/main.fcca8bfa.chunk.js","sourcesContent":["import React from 'react';\nimport styles from './spinner.module.css';\n\nfunction spinner() {\n  return (\n    <div className={styles.container}>\n      <div className={styles.row}>\n        <div className={styles.spinner} />\n      </div>\n      <div className={styles.row}>\n        <h1> Loading </h1>\n      </div>\n    </div>\n  );\n}\n\nexport default spinner;\n","import moment from 'moment';\nconst NAMES = require('../data/prayers');\n\n\nexport const parseDateTime = (timeString, day) => {\n  const [hour, minute] = timeString.split(':');\n  const newDay = new moment();\n  newDay.date(day);\n  newDay.hour(hour);\n  newDay.minute(minute)\n  return newDay;\n};\n\nexport const timesFromStringtoDate = prayer => {\n  let result = {};\n  NAMES.forEach(name => {\n    result[name] = moment(parseDateTime(prayer[name], prayer.day));\n  });\n  return result;\n};\n","import React, { useEffect, useState } from 'react';\nimport moment from 'moment';\n\nexport default function clock({ format }) {\n  const [time, setTime] = useState(moment());\n  const defaultFormat = 'HH:mm:ss';\n  useEffect(() => {\n    const interval = setInterval(() => setTime(moment()), 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, []);\n  return <span>{moment(time).format(format ? format : defaultFormat)}</span>;\n}\n","import React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport 'moment/locale/fr';\nimport { timesFromStringtoDate } from '../utils/dates';\nimport { toTitleCase } from '../utils/strings';\nimport Clock from './clock';\nconst NAMES = require('../data/prayers');\n\nconst PrayerCard = ({ prayer }) => {\n  let [difference, setDifference] = useState();\n  let [nextOne, setNextOne] = useState();\n  const times = timesFromStringtoDate(prayer);\n\n  const updateDifference = () => {\n    const nextOnes = Object.keys(times).filter(t =>\n      moment().isBefore(times[t])\n    );\n    nextOne = nextOnes.length === 0 ? NAMES[0] : nextOnes[0];\n    setNextOne(nextOne);\n    const diff = moment(times[nextOne].diff(moment())).format('HH:mm:ss');\n    setDifference(diff);\n  };\n\n  useEffect(() => {\n    updateDifference();\n    const interval = setInterval(updateDifference, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [prayer]);\n\n  let date = toTitleCase(moment(prayer.date).format('dddd LL'));\n\n  return (\n    <div className=\"card\">\n      <h1>{prayer.city}</h1>\n      <h2>{date}</h2>\n      <h2>\n        <Clock />\n      </h2>\n      <ul>\n        {NAMES.map(name => {\n          return (\n            <li key={name} className={name === nextOne ? 'next-prayer' : ''}>\n              <span className=\"name\">{name}</span>\n              <span className=\"time\">{prayer[name]}</span>\n              {name === nextOne && (\n                <span className=\"difference\">{difference}</span>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n      <dl />\n    </div>\n  );\n};\n\nexport default PrayerCard;\n","export const toTitleCase = str =>\n  str\n    .match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)\n    .map(x => x.charAt(0).toUpperCase() + x.slice(1))\n    .join(' ');","import React from 'react';\nimport Select from 'react-select';\n\nconst SelectList = ({ values, onChange, value }) => {\n  const options = values.map(e => ({\n    value: e.id,\n    label: e.name\n  }));\n\n\n  return (\n    <div className=\"select\">\n      <Select\n        options={options}\n        menuPlacement={'top'}\n        defaultValue={options.find(e => e.value === value)}\n        onChange={onChange}\n      />\n    </div>\n  );\n};\n\nexport default SelectList;\n","import axios from 'axios';\n\n//TODO: Add JSDoc\nexport const getFromLocalStorageOrApi = async (name, url) => {\n  if (!localStorage.getItem(name)) {\n    const value = (await axios.get(url)).data;\n    localStorage.setItem(name, JSON.stringify(value));\n    return value;\n  }\n\n  return JSON.parse(localStorage.getItem(name));\n};\n\n/**\n *Delete all items in the localStorage that are not specified as arguments\n *\n * @param {*} args  keys that should not be deleted from localStorage\n */\n\nexport const cleanLocalStorage = (...args) => {\n  Object.keys({ ...localStorage })\n    .filter(e => !args.includes(e))\n    .forEach(e => localStorage.removeItem(e));\n};\n","import React, { useState, useEffect } from 'react';\nimport 'reset-css';\nimport './App.css';\nimport moment from 'moment';\n\nimport Spinner from './common/spinner';\nimport PrayerCard from './components/prayerCard';\nimport SelectList from './components/selectList';\nimport { useLocalStorage } from './utils/customHooks';\nimport {\n  cleanLocalStorage,\n  getFromLocalStorageOrApi\n} from './utils/localStorage';\n\nconst API_URL = 'https://maroc-salat.herokuapp.com/';\n\nconst App = () => {\n  const [id, setId] = useLocalStorage('id', 1);\n  const [cities, setCities] = useState();\n  const [prayers, setPrayers] = useState();\n  const PRAYERS_KEY = `prayers_${moment().date()}_${moment().month() + 1}`;\n  const URL = `${API_URL}prayer?month=${moment().month() +\n    1}&day=${moment().date()}`;\n\n  useEffect(() => {\n    async function init() {\n      const initalCities = await getFromLocalStorageOrApi(\n        'cities',\n        `${API_URL}city`\n      );\n      setCities(initalCities);\n      const initialPrayers = await getFromLocalStorageOrApi(PRAYERS_KEY, URL);\n      setPrayers(initialPrayers);\n\n      cleanLocalStorage('id', 'cities', PRAYERS_KEY);\n    }\n    init();\n  }, []);\n\n  return (\n    <div id=\"main\">\n      {id && prayers ? (\n        <>\n          <PrayerCard prayer={prayers.find(e => e.id === id)} />\n          <SelectList\n            value={id}\n            values={cities}\n            onChange={e => setId(e.value)}\n          />\n        </>\n      ) : (\n        <Spinner />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import { useState, useEffect } from 'react';\n\nexport const useLocalStorage = (name, initialValue = null) => {\n  const [value, setValue] = useState(\n    +localStorage.getItem(name) || initialValue\n  );\n\n  useEffect(() => {\n    localStorage.setItem(name, value);\n  }, [value]);\n\n  return [value, setValue];\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__13LQm\",\"container\":\"spinner_container__3X5jo\",\"row\":\"spinner_row__297t4\"};"],"sourceRoot":""}