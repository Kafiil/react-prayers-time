{"version":3,"sources":["common/spinner.module.css","components/prayerCard.js","common/spinner.js","components/selectList.js","App.js","index.js"],"names":["module","exports","spinner","container","row","NAMES","require","PrayerCard","_ref","prayer","local","date","moment","locale","format","match","map","x","charAt","toUpperCase","slice","join","react_default","a","createElement","className","city","name","key","styles","SelectList","values","onChange","value","c","id","API_URL","byName","b","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","e","target","localStorage","setItem","current","state","prayers","filter","p","setState","getItem","axios","get","concat","cities","data","sort","JSON","stringify","parse","day","month","PRAYERS_KEY","Fragment","prayerCard","selectList","common_spinner","Component","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.119fc26f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__5ChKr\",\"container\":\"spinner_container__2eKww\",\"row\":\"spinner_row__IB347\"};","import React from \"react\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/fr\";\r\nimport \"moment/locale/ar-ma\";\r\nconst NAMES = require(\"../data/prayers\");\r\n\r\n//TODO: extract to a lib\r\nconst toTitleCase = str =>\r\n  str\r\n    .match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)\r\n    .map(x => x.charAt(0).toUpperCase() + x.slice(1))\r\n    .join(\" \");\r\n\r\nconst PrayerCard = ({ prayer, local }) => {\r\n  let date = moment(prayer.date)\r\n    .locale(local)\r\n    .format(\"dddd LL\");\r\n\r\n  if (local === \"fr\") {\r\n    date = toTitleCase(date);\r\n  }\r\n  return (\r\n    <div className=\"card\">\r\n      <h1>{prayer.city}</h1>\r\n      <h2>{date}</h2>\r\n      <ul>\r\n        {NAMES.map(name => {\r\n          return (\r\n            <li key={name}>\r\n              <span className=\"name\">{name}</span>\r\n              <span className=\"time\">{prayer[name]}</span>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n      <dl />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrayerCard;\r\n","import React from \"react\";\r\nimport styles from \"./spinner.module.css\";\r\n\r\nfunction spinner() {\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.row}>\r\n        <div className={styles.spinner} />\r\n      </div>\r\n      <div className={styles.row}>\r\n        <h1> Loading </h1>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default spinner;\r\n","import React from 'react';\r\n\r\nconst SelectList = ({ values, onChange, value }) => {\r\n  return (\r\n    <div className=\"select\">\r\n      <select value={value} onChange={onChange}>\r\n        {values.map(c => {\r\n          return (\r\n            <option value={c.id} key={c.id}>\r\n              {c.name}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectList;\r\n","import React, { Component } from 'react';\r\nimport 'reset-css';\r\nimport './App.css';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\nimport PrayerCard from './components/prayerCard';\r\nimport Spinner from './common/spinner';\r\nimport SelectList from './components/selectList';\r\n\r\nconst API_URL = 'https://maroc-salat.herokuapp.com/';\r\n\r\nconst byName = (a, b) => (a.name > b.name ? 1 : b.name > a.name ? -1 : 0);\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      local: 'fr'\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    //TODO: Refactor this mess\r\n    if (!localStorage.getItem('cities')) {\r\n      const cities = (await axios.get(`${API_URL}city`)).data.sort(byName);\r\n      localStorage.setItem('cities', JSON.stringify(cities));\r\n    }\r\n    const cities = JSON.parse(localStorage.getItem('cities'));\r\n\r\n    if (!localStorage.getItem('id')) {\r\n      localStorage.setItem('id', cities[0].id);\r\n    }\r\n    const id = +localStorage.getItem('id');\r\n\r\n    const day = moment().date();\r\n    const month = moment().month() + 1;\r\n\r\n    const PRAYERS_KEY = `prayers_${day}_${month}`;\r\n    if (!localStorage.getItem(PRAYERS_KEY)) {\r\n      const prayers = (await axios.get(\r\n        `${API_URL}prayer?month=${month}&day=${day}`\r\n      )).data;\r\n      localStorage.setItem(PRAYERS_KEY, JSON.stringify(prayers));\r\n    }\r\n    const prayers = JSON.parse(localStorage.getItem(PRAYERS_KEY));\r\n    this.setState({\r\n      cities,\r\n      id,\r\n      prayers,\r\n      current: prayers.filter(p => p.id === id)[0]\r\n    });\r\n  }\r\n\r\n  onChange = e => {\r\n    const id = +e.target.value;\r\n    localStorage.setItem('id', id);\r\n    const current = this.state.prayers.filter(p => p.id === id)[0];\r\n    this.setState({ current, id });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"main\">\r\n        {this.state.prayers ? (\r\n          <React.Fragment>\r\n            <PrayerCard local={this.state.local} prayer={this.state.current} />\r\n            <SelectList\r\n              value={this.state.id}\r\n              values={this.state.cities}\r\n              onChange={this.onChange}\r\n            />\r\n          </React.Fragment>\r\n        ) : (\r\n          <Spinner />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}